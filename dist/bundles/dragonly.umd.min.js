!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],t):t((e.ng=e.ng||{},e.ng.dragonly={}),e.ng.core)}(this,function(e,t){"use strict";var n=function(){function e(e,t){this.elementRef=e,this.renderer=t,this.sessionStorageKey="dragOnlyElementPosition"}return e.prototype.ngOnInit=function(){var e=this;this.handlersToDestroy=[],this.sessionStorageKey+=this.dragOnly,this.elementPosition=this.calculateInitialPosition(),this.renderer.listen(this.elementRef.nativeElement,"mousedown",function(t){return e.init(t)}),this.update()},e.prototype.init=function(e){var t=this;this.mousePosition=new o(e.clientX,e.clientY),this.handlersToDestroy=[this.renderer.listen("document","mousemove",function(e){return t.calculate(e)}),this.renderer.listen("document","mouseup",function(e){return t.removeHandlers()})]},e.prototype.calculate=function(e){var t=this.mousePosition.diff(new o(e.clientX,e.clientY));this.mousePosition=this.mousePosition.add(t),this.elementPosition=this.elementPosition.add(t),this.update()},e.prototype.removeHandlers=function(){for(var e=0,t=this.handlersToDestroy;e<t.length;e++){var n=t[e];"function"==typeof n&&n()}this.store()},e.prototype.store=function(){try{sessionStorage.setItem(this.sessionStorageKey,JSON.stringify(this.elementPosition))}catch(e){console.log("\n            Your browser does not support sessionStorage and will \n            not store the position of the element after it's closed.\n            Error message: "+e.message)}},e.prototype.read=function(){try{var e=sessionStorage.getItem(this.sessionStorageKey);if(!e)return null;var t=JSON.parse(e);return t&&t.x&&t.y?new o(t.x,t.y):null}catch(e){return console.log("\n            Your browser does not support sessionStorage and will \n            not store the position of the element after it's closed.\n            Error message: "+e.message),null}},e.prototype.update=function(){this.renderer.setStyle(this.elementRef.nativeElement,"top",this.elementPosition.y+"px"),this.renderer.setStyle(this.elementRef.nativeElement,"left",this.elementPosition.x+"px")},e.prototype.calculateInitialPosition=function(){var e=this.read();return e instanceof o?e:new o(window.innerWidth/2,window.innerHeight/2)},e.decorators=[{type:t.Directive,args:[{selector:"[dragOnly]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},e.propDecorators={dragOnly:[{type:t.Input}]},e}(),o=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.diff=function(t){return new e(-this.x+t.x,-this.y+t.y)},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e}(),i=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[n],exports:[n]}]}],e.ctorParameters=function(){return[]},e}();e.DragOnlyModule=i,e.DragOnlyDirective=n,e.EventPosition=o,Object.defineProperty(e,"__esModule",{value:!0})});